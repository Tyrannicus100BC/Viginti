.scene {
  width: 80px;
  height: 112px;
  perspective: 1000px;
  user-select: none;
  -webkit-user-select: none;
  /* Ensure spacing if passed className affects this */
  position: relative; 
}

.card {
  width: 100%;
  height: 100%;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.6s;
  border-radius: 8px;
  box-shadow: 0 4px 6px rgba(0,0,0,0.3);
}

.card:hover {
    /* note: hovering a rotating element can be tricky, we apply hover effect to the scene or handle carefully */
    z-index: 10;
}

/* Being "drawn" (highlighted) typically shouldn't rotate, but if it does, it's fine */
.drawn {
    z-index: 1;
}

.drawn .card {
    outline: 3px solid #ffd700;
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
}

.face {
  position: absolute;
  width: 100%;
  height: 100%;
  /* backface-visibility: hidden; */
  /* -webkit-backface-visibility: hidden; */
  border-radius: 8px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding: 4px;
  box-sizing: border-box;
  background: white;
  border: 1px solid rgba(0,0,0,0.1);
}

/* Front Face Styles */
.front {
  transform: rotateY(0deg) translateZ(1px);
  font-family: 'Times New Roman', serif;
  font-weight: bold;
  font-size: 1.2rem;
}

.red { color: #d32f2f; }
.black { color: #212121; }

/* Back Face Styles */
.back {
  transform: rotateY(180deg) translateZ(1px);
  background: #2c3e50;
  border: 2px solid #ecf0f1;
  display: flex;
  align-items: center;
  justify-content: center;
}

.pattern {
    width: 60px;
    height: 90px;
    background: repeating-linear-gradient(
        45deg,
        #34495e,
        #34495e 10px,
        #2c3e50 10px,
        #2c3e50 20px
    );
    border-radius: 4px;
    opacity: 0.5;
}

.cornerTop {
    position: absolute;
    top: 4px;
    left: 4px;
    display: flex;
    flex-direction: column;
    align-items: center;
    line-height: 1;
}

.cornerBottom {
    position: absolute;
    bottom: 4px;
    right: 4px;
    display: flex;
    flex-direction: column;
    align-items: center;
    line-height: 1;
    transform: rotate(180deg);
}



.rank {
    font-size: 1.5rem;
    font-weight: bold;
    margin-bottom: -5px; /* Pull suit up significantly */
}

.smallSuit {
    font-size: 2.2rem;
    line-height: 0.8; /* Reduce line height to keep it compact */
}

/* Animations Classes */
/* We will apply animation classes to the .card element */

/* Animations Classes */
/* We will apply animation classes to the .card element */

.animDealAndFlip {
    animation: dealAndFlip var(--anim-deal-duration) ease-out both; 
    transition: none !important;
}

/* Force front face to be hidden during the face-down part of the animation */
.animDealAndFlip .front,
.animDealFaceDown .front,
.animDoubleDownAndFlip .front {
    animation: hideFront var(--anim-deal-duration) steps(1, end) both;
    animation-delay: inherit;
}

/* Keyframes - Inlined for Scope Safety */

@keyframes hideFront {
    0% { visibility: hidden; }
    50% { visibility: visible; }
    100% { visibility: visible; }
}

@keyframes dealAndFlip {
  /* Phase 1: Fade In & Slide Up (Face Down) - 0% to 50% (0.25s) */
  0% {
    opacity: 0;
    transform: translateY(30px) rotateY(180deg) translateZ(0); /* Start neutral */
  }
  50% {
    opacity: 1;
    transform: translateY(0) rotateY(180deg) translateZ(0);
  }
  /* Phase 2: Flip Over - 50% to 100% (0.25s) */
  50.01% {
    /* Ensure clear switch to flip phase */
    transform: translateY(0) rotateY(180deg) translateZ(0);
  }
  100% {
    opacity: 1;
    transform: translateY(0) rotateY(0deg) translateZ(0);
  }
}

@keyframes doubleDownAndFlip {
    /* Screen UP is Local X- (because parent is rotate(90deg)) */
    /* rotateY(180deg) flips the X axis. */
    /* So if Local X+ was Screen Y+ (Down), after flip Local X+ is Screen Y- (Up). */
    /* To start at Screen DOWN, we need to move toward Screen Y+. */
    /* If Local X+ is now UP, we need Local X-. */
    0% {
      opacity: 0;
      transform: translateX(-30px) rotateY(180deg) translateZ(0); 
    }
    50% {
      opacity: 1;
      transform: translateX(0) rotateY(180deg) translateZ(0);
    }
    50.01% {
      transform: translateX(0) rotateY(180deg) translateZ(0);
    }
    100% {
      opacity: 1;
      transform: translateX(0) rotateY(0deg) translateZ(0);
    }
  }

@keyframes dealFaceDown {
  0% {
    opacity: 0;
    transform: translateY(30px) rotateY(180deg) translateZ(0);
  }
  100% {
    opacity: 1;
    transform: translateY(0) rotateY(180deg) translateZ(0);
  }
}

@keyframes revealFlip {
  0% {
    transform: rotateY(180deg) translateZ(0);
  }
  100% {
    transform: rotateY(0deg) translateZ(0);
  }
}

@keyframes enterFromDraw {
  0% {
    opacity: 0;
    transform: translateY(-200px) scale(1.1);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes flyInFromDraw {
    0% {
        /* Start from the center position */
        transform: translate(var(--start-tx, 0), var(--start-ty, -150px)) scale(1.1);
    }
    100% {
        /* End at the hand position */
        transform: translate(0, 0) scale(1);
    }
}

/* Definitions for other classes */
.animDealFaceDown {
    animation: dealFaceDown var(--anim-deal-duration) ease-out both;
    transition: none !important;
}

.animRevealFlip {
    animation: revealFlip var(--anim-flip-duration) ease-out both;
    transition: none !important;
}

.animEnterDraw {
    animation: flyInFromDraw var(--anim-assign-duration) ease-out both;
    transition: none !important;
}

.animDoubleDownAndFlip {
    animation: doubleDownAndFlip var(--anim-deal-duration) ease-out both;
    transition: none !important;
}


/* Reset for Discarding: Force face up, no rotation, no opacity issues. */
.animReset {
    transform: rotateY(0deg) !important;
    animation: none !important;
    opacity: 1 !important;
}

/* Static states */
.isFlipped {
    transform: rotateY(180deg);
}
